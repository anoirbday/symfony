{% extends 'base.html.twig' %}

{% block body %}
    <link rel="stylesheet" href="{{ asset('css/fonts.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/bootstrap.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/font-awesome.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/magnific-popup.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/custom_animation.css') }}" />
    <!--revolution-->
    <link href="{{ asset('js/plugin/revolution/css/settings.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('js/plugin/revolution/css/layers.css') }}" rel="stylesheet" type="text/css">
    <link href="{{ asset('js/plugin/revolution/css/navigation.css') }}" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{{ asset('js/plugin/owl/owl.carousel.css') }}" />
    <link rel="stylesheet" href="{{ asset('css/style.css') }}" media="screen" />
    <link rel="stylesheet" href="{{ asset('css/colors/default.css') }}" id="colors" />


    <button  data-title="Edit" data-toggle="modal" data-target="#edit " class="read-more">ajouter une reservation</button>


    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button>
                    <h4 class="modal-title custom_align" id="Heading">Reserver</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        {#{{ form_start(edit_form) }}#}
                        <input class="form-control " type="text" placeholder="occasion" id="occasion" name="occasion">
                        {#{{form_widget(edit_form.nom ,{ 'attr': {'class': "form-control",'placeholder': "Nom"}})}}#}
                    </div>
                    <div class="form-group">
                        <input class="form-control " type="date" placeholder="date" id="date" name="date">
                        {#{{form_widget(edit_form.prenom ,{ 'attr': {'class': "form-control",'placeholder': "Prenom"}})}}#}
                    </div>
                    <div class="form-group">
                        <input class="form-control " type="time" placeholder="heure" id="heure" name="heure">
                        {#{{form_widget(edit_form.prenom ,{ 'attr': {'class': "form-control",'placeholder': "Prenom"}})}}#}
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="nb personne" id="nb" name="nb">
                        {#{{form_widget(edit_form.specialite ,{ 'attr': {'class': "form-control",'placeholder': "adresse"}})}}#}
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="message" id="message" name="message">
                        {#{{form_widget(edit_form.specialite ,{ 'attr': {'class': "form-control",'placeholder': "adresse"}})}}#}
                    </div>
                    <div class="form-group">
                        {#<input type="text" class="form-control" type="number" step="1" placeholder="id etablissement" id="idEtablissement" name="idE">#}
                        {{form_widget(form.idEtablissement ,{ 'id': 'ide','attr': {'class': "form-control",'placeholder': "Etablissement"}})}}
                    </div>

                    {#<div class="form-group">#}

                    {#{{form_widget(form.adresse ,{ 'attr': {'class': "form-control",'placeholder': "adresse"}})}}#}
                    {#</div>#}
                </div>
                <div class="modal-footer ">
                    <input value="AJOUTER" type="submit" onclick="saveData()" class="btn btn-warning btn-lg glyphicon glyphicon-ok-sign" style="width: 100%" > Â 
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal-dialog -->
    </div>








<div id="result">

        {% for reservation in reservations %}
            <article class="service type-service hentry row one-col-service">


                <div class="col-lg-6 col-md-5">
                    <div class="service-contents">
                        <div class="entry-content">

                            <p>occasion : {{ reservation.occasion }}</p>

                            <p>date de la reservation : {% if reservation.date %}{{ reservation.date|date('Y-m-d') }}{% endif %}</p>
                            <p>heure : {% if reservation.heure %}{{ reservation.heure|date('H:i:s') }}{% endif %}</p>
                            <p>nombre de personne : {{ reservation.nbPersonne }}</p>



                            <p>message : {{ reservation.message }}</p>
                            <p>valid : {% if reservation.valid %}Yes{% else %}No{% endif %}</p>
                            <p>checked : {% if reservation.checked %}Yes{% else %}No{% endif %}</p>




                        </div>
                        <ul>
                            <li>
                                <a href="{{ path('reservation_show', { 'id': reservation.idReservation }) }}">show</a>
                            </li>
                            <li>
                                <a href="{{ path('reservation_edit', { 'id': reservation.idReservation }) }}">edit</a>
                            </li>
                        </ul>
                </div>
                </div>
            </article>

        {% endfor %}

</div>



















    <ul>
        <li>
            <a href="{{ path('reservation_new') }}">Create a new reservation</a>
        </li>
    </ul>


    <script src="{{ asset('js/jquery-2.2.3.min.js') }}"></script>
    <script>
        function saveData() {

            var occasion= $('#occasion').val();
            var date= $('#date').val();
            var heure= $('#heure').val();
            var nb= $('#nb').val();
            var message= $('#message').val();
            //var message= $('#message').val();
           var idEtablissement= $('#ide').val();

            $.ajax({
                type: "POST",
                url: "{{ path('reservation_new') }}",
                data: {'occasion': occasion,'nb': nb,'message': message,'date':date,'heure':heure,'idE':idEtablissement},
                success: function (data ) {
                    console.log(data);
                    $("#result").html(data);

                }

            });

        }

    </script>


{% endblock %}
